<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signin</title>
    <link rel="stylesheet" href="style-signin.css">
</head>

<body>
    <header>
        <nav class="navbar">
            <img src="logo.png" class="logo">
            <ul>
                <li><a href="index.html">Home</a> </li>
                <li><a href="user-login.html">Log-In</a> </li>
            </ul>
        </nav>

    </header>
    <form action="signin.html">
        <div class="login">
            <fieldset class="field">
                <h1>Sign In</h1>
                <input type="text" class="username input" id="userName" placeholder="Name"><br>
                <input type="email" id="newEmail" class="email input" placeholder="Enter your Email" required><br>
                <input type="password" id="newPassword" class="password input" placeholder="Password" required><br>
                <button class="signin-btn" id="btn-signup" >Sign In</button>
            </fieldset>
        </div>
    </form>

</body>
<script>
    const firstName = document.getElementById("userName");
    const email = document.getElementById("newEmail");
    const password = document.getElementById("newPassword");
    const btnSignup = document.getElementById("btn-signup");

    function signUp() {
        let first_name = firstName.value;
        let e_mail = email.value;
        let pass_word = password.value;

        if (!first_name || !e_mail || !pass_word) {
            return alert("You need to fill up all the forms.");
        }

        let user_data = {
            firstName: first_name,
            email: e_mail,
            password: pass_word,
            ticket:[]
        };

        let clientsArr = JSON.parse(localStorage.getItem("users")) || [];

        let userExists = clientsArr.find(
            (user) => user.email === e_mail
        );//userExixt is a boolean function 

        if (userExists) {
            return alert("User already exists, please log in");
        }

        clientsArr.push(user_data);

        localStorage.setItem("users", JSON.stringify(clientsArr));
        
        window.location.href = "user-login.html";

        alert("Account created!");
    }

    btnSignup.addEventListener("click", signUp);

</script>

</html>